document.addEventListener("DOMContentLoaded", function () {
    let dropdowns = document.querySelectorAll("select");

    dropdowns.forEach(select => {
        // Add placeholder effect initially
        if (!select.value) select.classList.add("placeholder-shown");

        select.addEventListener("change", function () {
            if (this.value) {
                this.classList.remove("placeholder-shown");
                this.classList.add("placeholder-hidden");
            } else {
                this.classList.add("placeholder-shown");
                this.classList.remove("placeholder-hidden");
            }
        });
    });
});


function generateFloodReportEmail() {
    let subject = `CTFC Case Flood Report - ${getFloodDataValue()}`;
    let recipient = "G-managers@example.com";
    
    let emailBody = `
Dear Team,

This email is being sent to provide details on case floods.

Below is the report:

${generateFloodReportTable()}

If there are any questions or concerns, please let me know.

Best regards,
[Your Name]
`;

    let mailtoLink = `mailto:${recipient}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
    window.location.href = mailtoLink;
}


function generateFloodReport() {
    let caseId = document.getElementById("flood-case-id").value.trim() || "N/A";
    let escalation = document.getElementById("escalation-type").value.trim() || "N/A";
    let severity = document.getElementById("severity-level").value.trim() || "N/A";

    let reportContent = `
        <table id="caseFloodTable" border="1" cellpadding="5" cellspacing="0" style="border-collapse: collapse; width: 100%; text-align: left;">
            <tr>
                <th style="border: 1px solid #00ff00; padding: 5px;">Case ID</th>
                <th style="border: 1px solid #00ff00; padding: 5px;">Escalation Type</th>
                <th style="border: 1px solid #00ff00; padding: 5px;">Severity Level</th>
            </tr>
            <tr>
                <td style="border: 1px solid #00ff00; padding: 5px;">${caseId}</td>
                <td style="border: 1px solid #00ff00; padding: 5px;">${escalation}</td>
                <td style="border: 1px solid #00ff00; padding: 5px;">${severity}</td>
            </tr>
        </table>
    `;

    document.getElementById("caseFloodReport").innerHTML = reportContent;
}

<!-- Case Flood Report Section -->
<h2>Case Flood Report</h2>
<input type="text" id="flood-case-id" placeholder="Enter Case ID" oninput="generateFloodReport()">
<input type="text" id="escalation-type" placeholder="Enter Escalation Type" oninput="generateFloodReport()">
<input type="text" id="severity-level" placeholder="Enter Severity Level" oninput="generateFloodReport()">

<!-- Live Report Preview -->
<div id="caseFloodReport"></div>

<!-- Buttons for Copying and Email -->
<button onclick="copyFloodReport()">Copy Report</button>
<button onclick="openFloodEmail()">Generate Email</button>


function copyFloodReport() {
    let reportContent = document.getElementById("flood-report-output").innerHTML;

    // Create a temporary div element to copy the HTML table as rich content
    let tempDiv = document.createElement("div");
    tempDiv.innerHTML = reportContent;
    
    document.body.appendChild(tempDiv);

    let range = document.createRange();
    range.selectNode(tempDiv);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);

    try {
        document.execCommand("copy");
        alert("Flood report copied to clipboard as a table!");
    } catch (err) {
        alert("Failed to copy report.");
    }

    window.getSelection().removeAllRanges();
    document.body.removeChild(tempDiv);
}
