function generateFloodReport() {
    let caseID = document.getElementById("parent-case").value.trim();
    let linkedCases = document.getElementById("link-cases-cli").value;
    let closeCases = document.getElementById("close-cases-cli").value;

    if (!caseID) {
        alert("Enter a valid Case ID before generating the report.");
        return;
    }

    let tableHTML = `
        <table border="1" style="width: 100%; border-collapse: collapse; text-align: left;">
            <thead>
                <tr style="background-color: #222; color: #00ff00;">
                    <th style="padding: 8px; border: 1px solid #00ff00;">Case ID</th>
                    <th style="padding: 8px; border: 1px solid #00ff00;">Linked Cases</th>
                    <th style="padding: 8px; border: 1px solid #00ff00;">Close Cases</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px; border: 1px solid #00ff00;">${caseID}</td>
                    <td style="padding: 8px; border: 1px solid #00ff00;">${linkedCases}</td>
                    <td style="padding: 8px; border: 1px solid #00ff00;">${closeCases}</td>
                </tr>
            </tbody>
        </table>
    `;

    document.getElementById("flood-report-output").innerHTML = tableHTML;
}

function generateFloodReportEmail() {
    let floodReportOutput = document.getElementById("flood-report-output").innerHTML;
    if (!floodReportOutput.trim()) {
        alert("No flood report has been generated yet.");
        return;
    }

    let caseID = document.getElementById("parent-case").value.trim();
    let subject = `Case Flood Report - ${caseID || "[Insert Case ID Here]"}`;

    let emailBody = `
        <p>Dear Team,</p>
        <p>This email provides details on the recent case floods.</p>
        <hr>
        ${floodReportOutput}  <!-- This keeps the table formatting -->
        <hr>
        <p>If you have any questions, please let me know.</p>
        <p>Best,<br>[Your Name]</p>
    `;

    let mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;

    // Open email client with formatted HTML
    let emailWindow = window.open(mailtoLink, "_blank");
    if (!emailWindow) {
        alert("Pop-up blocked! Allow pop-ups for this site to use the email function.");
    }
}



<button onclick="generateFloodReport()">Generate Report</button>
<button onclick="generateFloodReportEmail()">Generate Email</button>

<div id="flood-report-output" style="margin-top: 15px; padding: 10px; border: 2px solid #00ff00; background-color: #111; color: #00ff00;">
    <!-- Flood report preview will appear here -->
</div>
